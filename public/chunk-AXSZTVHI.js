import{a as R}from"./chunk-XNAPEQBD.js";import{a as v}from"./chunk-3DTBHB4S.js";import{B as D,c as j}from"./chunk-BVTTO4ZY.js";import"./chunk-TXXAEVAV.js";import{i as O,l as V,m as T}from"./chunk-WX3NAUWJ.js";import"./chunk-IX6G3U3V.js";import{$a as f,Bb as o,Cb as s,Db as C,Fc as I,Hb as b,Hc as w,Jb as m,Kb as l,Kc as S,Sb as c,Tb as y,Ub as h,Vb as k,Xa as P,_a as a,_b as M,bc as E,oa as _,qb as x,sb as d,wa as u,xa as g}from"./chunk-XZIY7FXL.js";var B=(n,r)=>({correcta:n,incorrecta:r});function N(n,r){if(n&1&&C(0,"img",17),n&2){let t=l(2);d("src",t.selectedPais.flags.png,P)("alt","Bandera de "+t.selectedPais.name.common)}}function U(n,r){if(n&1){let t=b();o(0,"div",4)(1,"h1"),c(2,"Preguntados!"),s(),o(3,"h2"),c(4),s(),o(5,"div",5)(6,"h2"),c(7,"\xBFDe qu\xE9 pa\xEDs es la siguiente bandera?:"),s(),o(8,"div",6),x(9,N,1,2,"img",7),s()(),o(10,"div",8)(11,"div",9)(12,"div",10),m("click",function(){u(t);let e=l();return g(e.verificarRespuesta(e.opciones[0]))}),c(13),s(),o(14,"div",11),m("click",function(){u(t);let e=l();return g(e.verificarRespuesta(e.opciones[1]))}),c(15),s()(),o(16,"div",12)(17,"div",13),m("click",function(){u(t);let e=l();return g(e.verificarRespuesta(e.opciones[2]))}),c(18),s(),o(19,"div",14),m("click",function(){u(t);let e=l();return g(e.verificarRespuesta(e.opciones[3]))}),c(20),s()()(),o(21,"div",15)(22,"button",16),m("click",function(){u(t);let e=l();return g(e.salir())}),c(23," Salir "),s()()()}if(n&2){let t=l();d("ngClass",E(8,B,t.respuestaEstado===!0,t.respuestaEstado===!1)),a(4),k("Puntos: ",t.puntos," / Vidas: ",t.vidas,""),a(5),d("ngIf",t.selectedPais),a(4),h(" ",t.opciones[0]," "),a(2),h(" ",t.opciones[1]," "),a(3),h(" ",t.opciones[2]," "),a(2),h(" ",t.opciones[3]," ")}}function q(n,r){n&1&&(o(0,"div"),c(1,"Cargando pa\xEDses..."),s())}function z(n,r){if(n&1&&(o(0,"div",18),c(1),s()),n&2){let t=l();a(),y(t.error)}}var X=(()=>{let r=class r{constructor(i,e,p,F){this.datosService=i,this.dialog=e,this.router=p,this.firestore=F,this.paises=[],this.selectedPais=null,this.loading=!0,this.error="",this.vidas=3,this.puntos=0}ngOnInit(){this.loadPaises()}loadPaises(){this.loading=!0,this.datosService.getPaises().subscribe({next:i=>{this.paises=i,this.loading=!1,this.nuevaPregunta()},error:i=>{this.error="Hubo un error al cargar los paises. Por favor, intente de nuevo.",this.loading=!1,console.error("Error loading paises:",i)}})}nuevaPregunta(){if(this.paises.length<4){this.error="No hay suficientes paises para generar una pregunta, intente mas tarde";return}this.respuestaEstado=null;let i=Math.floor(Math.random()*this.paises.length);for(this.selectedPais=this.paises[i],this.opciones=[this.selectedPais.name.common];this.opciones.length<4;){let e=this.paises[Math.floor(Math.random()*this.paises.length)].name.common;this.opciones.includes(e)||this.opciones.push(e)}this.opciones=this.opciones.sort(()=>Math.random()-.5)}verificarRespuesta(i){this.selectedPais&&i===this.selectedPais.name.common?(this.respuestaEstado=!0,this.puntos++):(this.respuestaEstado=!1,this.vidas--,this.vidas===0&&this.finDeJuego()),setTimeout(()=>{this.nuevaPregunta()},2e3)}salir(){this.dialog.open(v,{data:{title:"Salir del juego",message:"\xBFEst\xE1 seguro que desea salir del juego?"}}).afterClosed().subscribe(e=>{e===!0&&(this.puntos>0&&this.enviarPuntos(),this.router.navigate(["/home"]))})}finDeJuego(){this.dialog.open(v,{data:{title:"Fin del juego",message:"Perdiste! Queres seguir jugando, o salir del juego?"}}).afterClosed().subscribe(e=>{e===!0?(this.puntos>0&&this.enviarPuntos(),this.router.navigate(["/home"])):(this.puntos>0&&this.enviarPuntos(),this.vidas=3,this.puntos=0)})}enviarPuntos(){let i=T(this.firestore,"puntuacion"),e=localStorage.getItem("loggedUser");V(i,{user:e,juego:"preguntados",puntos:this.puntos})}};r.\u0275fac=function(e){return new(e||r)(f(R),f(D),f(j),f(O))},r.\u0275cmp=_({type:r,selectors:[["app-preguntados"]],standalone:!0,features:[M],decls:4,vars:3,consts:[[1,"form-container"],["class","game-container",3,"ngClass",4,"ngIf"],[4,"ngIf"],["class","error-message",4,"ngIf"],[1,"game-container",3,"ngClass"],[1,"consigna-container"],[1,"bandera-container"],[3,"src","alt",4,"ngIf"],[1,"opciones-container"],[1,"opciones-fila1"],[1,"opcion1",3,"click"],[1,"opcion2",3,"click"],[1,"opciones-fila2"],[1,"opcion3",3,"click"],[1,"opcion4",3,"click"],[1,"buttons-container"],["mat-fab","","extended","",1,"button-salir",3,"click"],[3,"src","alt"],[1,"error-message"]],template:function(e,p){e&1&&(o(0,"div",0),x(1,U,24,11,"div",1)(2,q,2,0,"div",2)(3,z,2,1,"div",3),s()),e&2&&(a(),d("ngIf",!p.loading&&!p.error),a(),d("ngIf",p.loading),a(),d("ngIf",p.error))},dependencies:[S,I,w],styles:['.form-container[_ngcontent-%COMP%]{background-image:url("./media/img-fondohome-EHGBAY2M.jpg");background-size:cover;background-repeat:no-repeat;background-position:center;height:100%;display:flex;justify-content:center}.game-container[_ngcontent-%COMP%]{background-color:#fffc;max-height:820px;border-radius:10px;text-align:center;transition:background-color .3s ease;display:flex;flex-direction:column;margin-top:40px;width:auto}.game-container.incorrecta[_ngcontent-%COMP%]{background-color:#ff00004d}.game-container.correcta[_ngcontent-%COMP%]{background-color:#00ff1a6d}.consigna-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;padding:10px}.bandera-container[_ngcontent-%COMP%]{width:460px;height:270px;text-align:center;display:flex;align-items:center;justify-content:center}.opciones-container[_ngcontent-%COMP%]{display:flex;width:800px;height:300px;justify-content:space-around;align-items:center;padding:20px;flex-direction:column}.opciones-fila1[_ngcontent-%COMP%], .opciones-fila2[_ngcontent-%COMP%]{width:700px;height:100px;display:flex;justify-content:space-between;align-items:center;padding:20px}.opcion1[_ngcontent-%COMP%], .opcion2[_ngcontent-%COMP%], .opcion3[_ngcontent-%COMP%], .opcion4[_ngcontent-%COMP%]{background-color:#deb887;width:280px;height:55px;border-radius:8px;text-align:center;display:flex;align-items:center;justify-content:center;cursor:pointer;color:#fff}.button-salir[_ngcontent-%COMP%]{background-color:#deb887;color:#fff;display:flex;justify-content:center;align-items:center;height:40px;width:fit-content;margin:20px auto;padding:0 20px;border-radius:5px}']});let n=r;return n})();export{X as default};
